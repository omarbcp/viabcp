<!-- VERSION EXP BUTTON WORDING -->
<style>
    main{
        outline: none;
    }
    .modal_svd_comunicacion form-check.horizontal .bcp_checkbox_microcomponent{
        align-items: flex-start !important;
    }
    .modal_svd_comunicacion .bcp_input_microcomponent input:focus{
        outline: unset !important;
    }
    main.bcp_banner-sin-carousel.producto > div > div > div > div > div{
        display: flex;
        justify-content: space-between;
    }
    .content_formulario_svd{
        position: relative;
        top: 32px;
        width: 412px;
        border-radius: 16px;
        box-shadow: 0px 2px 4px 0px #52709433;
        background-color: #FFFFFF;
        padding: 32px 24px;
        min-height: 429px;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .hidden-captcha {
        display: none;
    }
    .pantalla_2{
        display: none;
    }
    .pantalla_2 > div:first-child {
        max-width: 304px;
        text-align: center;
    }
    .mostrar{
        display: block;
    }
    .pantalla_1 .title h3{
        margin: 0px;
        color: #002A8D;
        font-family: 'Flexo-Demi';
        font-size: 16px;
        line-height: 1.5;
        margin-bottom: 25px;
    }
    .pantalla_2 img{
        width: 72px;
    
    }
    .pantalla_2 .title{ 
        margin: auto;
        font-size: 20px;
        line-height: 24px;
        font-family: 'Flexo-Demi';
        color: #002A8D;
        margin-top: 24px;
        margin-bottom: 24px;
        text-align: center !important;
    }
    .pantalla_2 .texto{
        font-family: Flexo;
        font-size: 16px;
        line-height: 24px;
        letter-spacing: 0px;
        text-align: center !important;
        color: #202E44;
    }
    .pantalla_2 .texto b{
        font-family: 'Flexo-Demi';
        font-weight: 100 !important;
    } 
    .input_llamar .bcp_boton_naranja{
         width: 100%;
         height: 40px;
    }
    #input_declaracion a{
        color: #ff7800;
        cursor: pointer;
    }
    .pantalla_2 img{
        display: block !important;
    }
    .pantalla_1 .title{
        display: block;
    }
    .pantalla_1 .title_mobile{
        display: none;
    }
    .titulo_pequeno,
    .titulo_grande,
    .titulo_mediano{
        margin: 0px;
        color: #002A8D;
        font-family: 'Flexo';
    }
    .titulo_pequeno{
        font-size: 14px;
        line-height: 16.8px;
        margin-bottom: 8px;
    }
    .titulo_grande{
        font-size: 24px;
        line-height: 32px;
        margin-bottom: 16px;
        font-family: 'Flexo-Demi';
    }
    .titulo_mediano{
        font-size: 16px;
        line-height: 24px;
        margin-bottom: 16px;
    }
    .titulo_mediano b{
        font-weight: 100;
        font-family: 'Flexo-Demi';
    }
    .Fondo-Imagen .bcp_btn_solicita {
        display: none;
    }
    .descripcion{
        font-size: 14px;
        line-height: 12px;
        color: #202E44;
        margin: 0px;
        margin-bottom: 24px;
    }
    .separator-sv{
        display: none;
    }
    .inputs_components form-input{
        margin-bottom: 12px !important;
    }
    .inputs_components form-check{
        margin-bottom: 0px !important;
    }
    .bcp_breadcrum {
        display: none!important;
    }
    .linkSOS {
        cursor: pointer;
    }
    @media(width<=657px){
        .bcp_breadcrum{
            margin-bottom: 470px;
            visibility: hidden; 
            
        }
        main.bcp_banner-sin-carousel.producto > div > div > div > div > div{
            display: block;
        }
        .modal_svd_comunicacion{
            position: relative;
            top: -176px;
        }
        .content_formulario_svd{
            width: 100%;
            max-width: 100%;
            box-shadow: inherit;
            display: block;
        }
        .Fondo-Imagen .bcp_banner_grupo_textos{
            display: none;
        }
        .pantalla_1 .title{
            display: none;
        }
        .pantalla_1 .title_mobile{
            display: block;
        }
        .bcp_banner-sin-carousel .container-fluid.Fondo-Imagen{
            /* background-image: url('https://www.viabcp.com/wcm/connect/f94b8ff9-a0cd-40d7-8dcf-74469458b2e9/image+11.png?MOD=AJPERES&attachment=fals&id=1708102073613') !important; */
            opacity: 1;
            height: 207px;
        }
        .separator-sv{
            display: block;
            margin-top: 32px;
        }
        .separator-sv svg{
            width: 100%;
        }
        .pantalla_2 .title{
            font-size: 24px;
        }
        .bcp_breadcrum.confirm{
            margin-bottom: 276px;
        }
        .bcp_beneficio_presentacion_producto {
            margin-top: 450px;
        }
        .content_formulario_svd {
            min-height: auto;
        }
    }
    @media only screen and (min-width: 992px){
        .bcp_banner-sin-carousel .container-fluid.Fondo-Imagen {
            height: 444px!important;
        }
    }
    @media only screen and (min-width: 1280px){
        .bcp_banner-sin-carousel .container-fluid.Fondo-Imagen .banner_textos {
            align-items: flex-start;
            width: 320px!important;
        }
    }
    @media (min-width: 768px) {
        .bcp_grupo_titulos{
            width: 768px!important;
        }
    }
    @media (max-width: 767px) {
        .bcp_grupo_titulos{
            width: calc(100% - 32px)!important;
           padding: 0px 16px;
        }
    }
    .custom-font24{
        font-size: 24px;
        line-height: 1.33;
    }
    .custom-font20{
        font-size: 20px;
        line-height: 1.4;
    }
    .input_declaracion {
        font-family: Flexo;
        font-size: 12px;
        line-height: 1.5;
        text-align: left;
        color: #606c7f;
        margin-bottom: 24px;
    }
    #input_declaracion a {
        color: #ff7800;
        cursor: pointer;
    }
</style>
<!--BANNER FIXED -->
<style>
    html {
        scroll-behavior: smooth;
    }
    .banner_fixed {
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #002A8D;
        color:#fff;
        height: 48px;
        width: 100%;
        position: fixed;
        bottom: 0;
        left:0;
    }
    .banner_fixed .banner_fixed_button {
        font-family: Flexo-Demi, sans-serif;
        font-size: 16px;
    }
</style>
<div class="modal_svd_comunicacion" style="display: none;">
    <div class="content_formulario_svd">
        <div class="pantalla_1">
            <div class="title">
                <h3>Completa tus datos y te contactaremos</h3>
            </div>
            <div class="title_mobile">
                <p class="titulo_pequeno">Seguro S.O.S. Salud</p>
                <p class="titulo_grande">Te cubrimos hasta S/ 30,000 en Emergencias Médicas y Accidentales</p>
                <!-- <p class="titulo_mediano">Recupera <b>hasta el 120%</b> de lo aportado</p> -->
                <p class="descripcion">Completa tus datos y te contactaremos</p>
            </div>
            <div class="inputs_components" id="frmSVDComunicacion">
                <div class="plan_sor_formulario_inputs">
                </div>
                <div class="input_llamar">
                    <button class="bcp_boton_naranja">Llámenme</button>
                </div>
            </div>
        </div>
        <div class="pantalla_2">
            <div>
                <svg width="72" height="72" viewBox="0 0 72 72" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M63.2795 52.1202C59.5328 58.4434 53.6545 63.3514 46.6303 65.8515C43.308 67.0353 39.7277 67.6799 35.9987 67.6799C18.5026 67.6799 4.31995 53.4971 4.31995 36.0011C4.31995 18.5028 18.5026 4.31995 35.9987 4.31995C53.4971 4.31995 67.6799 18.5028 67.6799 36.0011C67.6799 41.8885 66.0761 47.3985 63.2795 52.1202Z" fill="#DCEDFF"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M31.3673 34.3711C34.4755 34.0912 37.9244 35.5055 41.0659 37.4304L41.5865 37.7558C41.7591 37.8656 41.9305 37.9769 42.1008 38.0893L42.608 38.4299C42.692 38.4872 42.7756 38.5448 42.8588 38.6025L43.3543 38.9514L43.841 39.3042C43.9214 39.3633 44.0014 39.4224 44.0809 39.4817L44.5534 39.8382L45.0155 40.1957L45.4666 40.5528C45.5408 40.6123 45.6145 40.6716 45.6878 40.7309L46.333 41.2614L46.747 41.6104L47.1472 41.9543L47.5332 42.2918L47.9041 42.6216L48.5981 43.2538L49.0743 43.6989L49.6456 44.2459L50.2503 44.8413L50.7235 45.3208L51.264 45.8884C54.5817 49.2334 58.2202 51.9889 61.9917 54.1184C58.2497 59.4755 52.896 63.6215 46.6303 65.8515C43.565 66.9438 40.2799 67.5771 36.861 67.6685L36.2678 67.2301C36.2678 67.2301 19.5291 50.7901 18.7976 49.5231C18.7818 49.4957 18.7766 49.4433 18.7819 49.3681L18.7975 49.2385C18.8053 49.1898 18.8157 49.1357 18.8286 49.0764L18.8749 48.8833L18.9361 48.6609L19.0122 48.4108L19.1029 48.1347L19.208 47.8341L19.3272 47.5107L19.4605 47.1661L19.6076 46.802L19.7682 46.4198L19.9423 46.0214L20.1295 45.6083L20.3297 45.1821L20.5427 44.7445C20.5792 44.6706 20.6163 44.5964 20.6539 44.5218L20.8857 44.0701L21.1297 43.6109L21.3858 43.146C21.5168 42.9123 21.6523 42.6771 21.7922 42.4413L22.0776 41.9691C24.3094 38.3461 27.5429 34.7159 31.3673 34.3711Z" fill="#FFC8E9"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M20.5374 6.24692L40.216 3.48127C42.5786 3.14922 44.7631 4.79535 45.0951 7.158L51.1074 49.9376C51.4395 52.3002 49.7933 54.4847 47.4307 54.8168L27.7521 57.5824C25.3894 57.9145 23.205 56.2683 22.8729 53.9057L16.8606 11.1261C16.5286 8.76345 18.1747 6.57897 20.5374 6.24692Z" fill="#005CFF"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M21.3883 8.16315L39.9262 5.55783C41.5013 5.33646 42.9576 6.43388 43.179 8.00898L48.9908 49.3626C49.2122 50.9377 48.1148 52.394 46.5397 52.6154L28.0019 55.2207C26.4268 55.4421 24.9704 54.3446 24.7491 52.7695L18.9372 11.4159C18.7158 9.84084 19.8132 8.38451 21.3883 8.16315Z" fill="white"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M30.2341 4.88409C31.8092 4.66273 33.2655 5.76015 33.4868 7.33525C33.7082 8.91035 32.6108 10.3667 31.0357 10.588C29.4606 10.8094 28.0043 9.71198 27.7829 8.13688C27.5615 6.56178 28.659 5.10546 30.2341 4.88409Z" fill="#005CFF"/>
                    <ellipse cx="30.6348" cy="7.73607" rx="1.44" ry="1.44" transform="rotate(-8 30.6348 7.73607)" fill="#83F0FF"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M38.594 23.195C39.0421 22.3789 40.0675 22.0803 40.8843 22.5281C41.667 22.9572 41.974 23.9161 41.6038 24.7136L41.5517 24.8167L35.4962 35.8449C35.0646 36.6309 34.0983 36.9362 33.2989 36.5592L33.1956 36.5061L28.2254 33.3956C27.4118 32.9422 27.1201 31.9155 27.574 31.1025C28.008 30.3248 28.967 30.0243 29.7615 30.3965L29.8688 30.4515L33.3554 32.7347L38.594 23.195Z" fill="#FF7800"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M22.4959 28.7161C22.8805 29.9407 22.459 31.2289 21.5294 32.0118C22.4933 32.2855 23.3033 33.0213 23.6254 34.0465C23.9635 35.1229 23.6789 36.2484 22.9738 37.0368C23.8443 37.3519 24.5618 38.0534 24.8602 39.0033C25.2012 40.0885 24.9091 41.2236 24.1914 42.0129C25.2783 42.2134 26.218 42.9897 26.5711 44.1137C27.0819 45.74 26.1711 47.4784 24.5368 47.9966C24.4062 48.038 24.3108 48.1038 24.2308 48.2022L24.1217 48.3616L24.1317 48.3139L24.0592 48.5465C23.5212 50.05 21.908 50.9202 20.3369 50.5085C18.6831 50.0752 17.7023 48.3855 18.1462 46.7346C18.2452 46.3662 18.4182 45.9146 18.6923 45.4146L18.6235 45.3974C16.9699 44.9633 15.9898 43.2733 16.4345 41.6225C16.5336 41.2545 16.7065 40.8034 16.9806 40.3039C15.5792 39.7196 14.7938 38.1773 15.2 36.6675C15.3012 36.2913 15.4794 35.8283 15.7639 35.3156C15.6525 35.2835 15.5417 35.2437 15.4322 35.1971C13.8606 34.5281 13.1377 32.7128 13.8175 31.1425C13.9805 30.7661 14.2498 30.2681 14.646 29.7103C15.6165 28.3441 16.9073 27.2499 18.6118 26.7095C20.2462 26.1914 21.9851 27.0898 22.4959 28.7161Z" fill="#FFC8E9"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M54.4821 32.2874C55.8244 33.2096 56.2026 35.0044 55.3845 36.3895L55.1814 36.7146L55.0425 36.9626C54.9707 37.0966 54.8957 37.2455 54.819 37.4086C54.4389 38.2175 54.1205 39.1528 53.9161 40.191C53.3251 43.1935 53.7844 46.4055 55.7471 49.8049C56.5991 51.2807 56.0858 53.1723 54.6005 54.0298C53.8783 54.4468 53.0593 54.5425 52.3103 54.3611L44.5981 56.803L44.5116 56.353L44.4361 55.8592L44.3827 55.436L44.3438 55.0712L44.3077 54.6671L44.2762 54.2246L44.2508 53.7451L44.2382 53.4053L44.2295 53.0499L44.2252 52.6791L44.2259 52.2934L44.2321 51.893L44.2442 51.4783L44.2627 51.0496L44.2881 50.6073L44.321 50.1517L44.3617 49.6831L44.4109 49.2018L44.4689 48.7083C44.4793 48.625 44.4902 48.5412 44.5014 48.457L44.5737 47.9456L44.6561 47.4228L44.749 46.8888C44.7654 46.7989 44.7823 46.7086 44.7997 46.6178L44.9095 46.0677C45.0058 45.605 45.1145 45.1316 45.2368 44.6484L45.3902 44.0638L45.5571 43.4702C46.2525 41.0777 47.285 38.4745 48.796 35.7574C48.9258 35.4322 49.0629 35.1172 49.2063 34.812C49.3377 34.5325 49.4656 34.2788 49.5873 34.0515L49.7648 33.7306L49.8493 33.5853L50.0684 33.2324L50.1669 33.0862C51.1438 31.679 53.0758 31.3214 54.4821 32.2874Z" fill="#FFC8E9"/>
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M23.911 41.7498C24.0303 41.7468 24.1294 41.841 24.1325 41.9602C24.1355 42.0795 24.0413 42.1786 23.9221 42.1817C22.3697 42.2214 20.7248 43.2593 18.9939 45.3154C18.917 45.4066 18.7808 45.4183 18.6895 45.3415C18.5982 45.2647 18.5865 45.1284 18.6634 45.0372C20.4663 42.8956 22.2134 41.7932 23.911 41.7498ZM22.7489 36.7959C22.8682 36.7959 22.9649 36.8926 22.9649 37.0119C22.9649 37.1312 22.8682 37.2279 22.7489 37.2279C20.8107 37.2279 18.9801 38.2456 17.2512 40.2992C17.1744 40.3904 17.0381 40.4021 16.9468 40.3253C16.8556 40.2485 16.8439 40.1122 16.9207 40.021C18.7257 37.877 20.6704 36.7959 22.7489 36.7959ZM21.1427 31.812C21.2618 31.8056 21.3635 31.897 21.3699 32.0161C21.3762 32.1353 21.2848 32.237 21.1657 32.2433C19.1531 32.3508 17.5004 33.3614 16.1936 35.2915C16.1267 35.3903 15.9924 35.4162 15.8936 35.3493C15.7948 35.2824 15.769 35.1481 15.8359 35.0493C17.2156 33.0115 18.9892 31.9269 21.1427 31.812Z" fill="#003CE5"/>
                    </svg>                    
                <p class="title">¡Gracias por tu interés en nuestro seguro!</p>
                <p class="texto">Nos comunicaremos contigo para brindarte más información acerca del <b>Seguro S.O.S. Salud</b>.</p>
            </div>
        </div>
        <div class="separator-sv">
            <svg width="327" height="1" viewBox="0 0 327 1" fill="none" xmlns="http://www.w3.org/2000/svg">
            <line x1="-4.37114e-08" y1="0.5" x2="327" y2="0.499971" stroke="#BFC4CC" stroke-dasharray="8 8"/>
            </svg>                    
        </div>
    </div>
</div>
<!-- <div class="exp_activity_sos_salud">
    <input type="hidden" name="expButtonW" id="expButtonW" value="testA">
</div> -->
[Component name="plantillas de presentacion (ux-frontend)/codigohtml-componentes-presentacionenlista/microcomponentes/microcomp.referenciaformulariowebcomponent"]
<script>
    let dataTaggeoSOS = {
        channel : "Viabcp",
        category : "Obten tu SOS Salud",
        group : "VIABCP",
        label : "",
        nameV : "Obten tu Seguro Vida Ahorro",
        producto : '',
        version : ''
    }
    let dataTaggeoExpWB = {
        channel : "Viabcp",
        category : "Obten tu SOS Salud-Landing",
        group : "VIABCP - Landing | SOS Salud",
        label : "",
        nameV : "",
        producto : "SOS",
        version : 'Seguros-ControlLlamenme'
    }
    
    const urlListaClinicas = '/wcm/connect/7cf6f89b-c5aa-4293-a51d-793c9857e539/DOCUMENTOS+AUXILIARES+SOS+SALUD.pdf?MOD=AJPERES&attachment=true&id=1709736930833'
    const urltyc = {
        link1:'https://www.viabcp.com/wcm/connect/fd365edf-7f13-44ef-8007-310f16d78895/Protecci%C3%B3n+de+Datos+Personales.pdf?MOD=AJPERES&attachment=false&id=1708105189312',
        link2:'https://www.viabcp.com/wcm/connect/a2d2ec7f-6035-4428-9933-7bef4bc9951b/T%26C+Promoci%C3%B3n+Vales+500+soles+-+Seguros+-+Campa%C3%B1a+Cross+Julio+Rev.21.06.pdf?MOD=AJPERES&attachment=false&id=1719509128937 '
    }

    const pantalla1 = document.querySelector('.pantalla_1')
    const pantalla2 = document.querySelector('.pantalla_2')
    const formularioSVD = document.querySelector('.modal_svd_comunicacion')
    // document.querySelector('.bcp_nivel1').appendChild(formularioSVD)
    let frmSVDComunicacion,frmInitSVDPlanes,frmInitSVDPlanesCaptcha;
    
    //let dataTaggeo = {};

    //Posicion Banner  
    //let dataTaggeoExp = {testN:'',testLabel:''}
    //let isExpBSOSSalud = !!sessionStorage.getItem('exp_sos_wording');
    let xpStorage = null    
    waitForElm('.exp_activity_sos_salud').then((elm) => {
        const buttonForm = document.querySelector('.input_llamar button')
        let newWording = 'Llámenme'
        xpStorage = document.querySelector('.exp_activity_sos_salud #expButtonW').value;
        //xpStorage = sessionStorage.getItem('exp_sos_wording');
        if(xpStorage == 'testA'){
            newWording = 'Quiero asesoría'
            dataTaggeoExpWB.version = 'Seguros-0624AsesoriaTestA'
            taggeoSVDModal({label:'',name:'Landing-Pnd',type:'trackFormView',dataTaggeo:dataTaggeoExpWB});
        } else if(xpStorage == 'testB'){
            newWording = 'Solicitar información'
            dataTaggeoExpWB.version = 'Seguros-0624AsesoriaTestB'
            taggeoSVDModal({label:'',name:'Landing-Pnd',type:'trackFormView',dataTaggeo:dataTaggeoExpWB});
        } else if(xpStorage == 'testC'){
            newWording = 'Lo quiero ahora'
            dataTaggeoExpWB.version = 'Seguros-0624AsesoriaTestC'
            taggeoSVDModal({label:'',name:'Landing-Pnd',type:'trackFormView',dataTaggeo:dataTaggeoExpWB});
        } else if(xpStorage == 'control'){
            taggeoSVDModal({label:'',name:'Landing-Pnd',type:'trackFormView',dataTaggeo:dataTaggeoExpWB});
        } 
        buttonForm.innerText = newWording
    });
    waitForElm('.bcp_cintillo').then((e)=>{e.style.display = 'none'})
    waitForElm('.bcp_boton_solicitalo_inferior').then((e)=>{e.style.display = 'none'})
    const generarInputs = () => {
        let inputHTML = `
        <form-input id="input_dni" name="input_dni" datatype="tel"
            minlength="8" maxlength="8" constraint="soloNumeros" label="DNI"
            msgerror="Ingresa tu número de documento">
        </form-input>
        <form-input id="input_celular" name="input_celular" datatype="tel"
            minlength="9" maxlength="9" constraint="soloNumeros" label="Celular"
            msgerror="Ingresa tu número de celular">
        </form-input>
        <div id="input_declaracion" class="input_declaracion">Al enviarnos esta información autorizas al BCP el tratamiento de tus datos personales. Conoce más <a id="tycDP">aquí</a>. Al adquirir este seguro participas del sorteo, revisa las bases <a id="tycCJ">aquí</a></div>
        <div class="hidden-captcha"><form-captcha id="frmSVDCaptcha" datacallback="frmSVDCaptchaCallback"></form-captcha></div>`;
        document.querySelector('.plan_sor_formulario_inputs').innerHTML = inputHTML;
        //frmSVDComunicacion.querySelector('#input_dni').addEventListener('change',(e)=>{validarCamposCardPlan(e);})
        //frmSVDComunicacion.querySelector('#input_celular').addEventListener('change',(e)=>{validarCamposCardPlan(e);})

        /*waitForElm('.exp_activity_sos_salud').then((elm) => {
            if(xpStorage != 'testB'){
                frmSVDComunicacion.querySelector('#input_name').addEventListener('change',(e)=>{validarCamposCardPlan(e);})
            }else {
                document.querySelector('#input_name').parentElement.remove()
            }
        })*/
        // frmSVDComunicacion.querySelector('#input_name').addEventListener('change',(e)=>{validarCamposCardPlan(e);})
        
        //frmSVDComunicacion.querySelector('#input_declaracion0').addEventListener('change',(e)=>{validarCamposCardPlan(e);})
        
        document.querySelector('#input_declaracion #tycDP').addEventListener('click',()=>{
            taggeoSVDModal({label:'Terminos y condiciones'});
            window.open(urltyc.link1,'_blank');
        })
        document.querySelector('#input_declaracion #tycCJ').addEventListener('click',()=>{
            taggeoSVDModal({label:'Terminos y condiciones Cyber Julio'});
            window.open(urltyc.link2,'_blank');
        })
        frmInitSVDPlanesCaptcha = frmSVDComunicacion.querySelector('#frmSVDCaptcha');
    }
    const openURL= (data)=>{
        const {url,taggeo,target='_blank'} = data
        taggeoSVDModal(taggeo)
        window.open(url,target)
    }
    let tagsInputs = [
        {c:8,call:'DNI'},
        {c:100,call:'Nombre y Apellido'},
        {c:9,call:'Celular'}
    ]
    
    const validarCamposCardPlan = (e) =>{
        console.log(e.target.getAttribute('maxlength'))
        tagsInputs.filter(it=>{
            if(e.target.getAttribute('maxlength') == it.c){
                console.log('lanza taggeo=>'+it.call)
                taggeoSVDModal({label:it.call,name:'Completar'})
            }
        })
    }
    
    const validateInput=(id,campo)=>{
        const input = document.getElementById(id)
        const bool = frmInitSVDPlanes.Validar[campo](input)
        return bool
    }
    //Funcion validar parametros inputs
    const validateInputs = () =>{
        let boolDNI = validateInput('input_dni','CampoNumerico');
        let boolTLF = validateInput('input_celular','CampoNumerico');
        // let booltName = validateInput('input_name','CampoTexto');
        // isExpBSOSSalud == true ? booltName = true : booltName = 
        let booltName = true;
        /*waitForElm('.exp_activity_sos_salud').then((elm) => {
            if(xpStorage != 'testB'){
                booltName = validateInput('input_name','CampoTexto');
            }else {
                booltName = true;
            }
        })*/
        //let chkDeclaracion = frmSVDComunicacion.querySelector('#input_declaracion');
        //let boolAceptaDeclaracion = true;
        /*if(chkDeclaracion){
            boolAceptaDeclaracion = false;
            boolAceptaDeclaracion = chkDeclaracion.getAttribute('style') ? true : frmInitSVDPlanes.Validar.CampoCheckButton(chkDeclaracion);
        }*/
        if (!boolDNI || !boolTLF || !booltName ) {
            console.log('validacion false')
            return false
        } else {
            return true;
        }
    }
    
    document.querySelector('.input_llamar button').onclick = () => {
        if(!validateInputs()) return
        const indexCaptcha = frmInitSVDPlanesCaptcha.getAttribute('index')
        taggeoSVDModal({label:'Te llamamos',dataTaggeo:dataTaggeoExpWB})
        grecaptcha.execute(indexCaptcha)
    }
    const actionLink = () => {
        const links = document.querySelectorAll('.linkSOS')
        links.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault()
                const url = urlListaClinicas
                const activo = e.target
                const label = activo.innerText+" - "+activo.parentElement.getAttribute('taggeo')
                const taggeo = {label: label, name: 'Click'}
                openURL({url,taggeo})
            })
        })
    }
    const actionScrollTop=()=>{
        const buttonsBannerFix = document.querySelectorAll('.bcp_boton_solicitalo_inferior a')

        buttonsBannerFix.forEach(btnScroll => {
            btnScroll.setAttribute('target','_self')
            btnScroll.querySelector('div').removeAttribute('tipo_enlace')
            btnScroll.querySelector('div').removeAttribute('enlace')
            btnScroll.addEventListener('click', (e) => {
                e.preventDefault()
                window.scrollTo({top: 0, behavior: 'smooth'})
            })
        })
        
    }
    const activarFixedBanner= (customConfig={})=>{
        const createElement = (custom={})=>{
            const init = {attrib:'',addClass:'',insertHtml:'',append:null}
            const config = { ...init, ...custom}
            let element = document.createElement('div')
            element.setAttribute('id',config.attrib)
            element.classList.add(config.addclass)
            element.innerHTML = config.insertHtml
            if(config.append instanceof Node){element.appendChild(config.append)}
            return element
        }
        const getDataScroll = (e)=>{
            let targetPosition = 0
            const targetElement = document.querySelector(e)
            console.log(targetElement)
            if(targetElement instanceof Node){
                const rect = targetElement.getBoundingClientRect()
                const scrollTop = document.documentElement.scrollTop
                targetPosition = rect.top + scrollTop
            }
            return targetPosition
        }
        const defaultConfig = {
            targetSelector: '',
            targetTop: '',
            bannerFix:{
                id:'bannerFixed',
                clase:'banner_fixed'
            },
            button:{
                label: 'Registrate',
                clase:'banner_fixed_button'
            } 
        };
        const config = { ...defaultConfig, ...customConfig}
        //console.log(config)
        const buttonFixed = createElement({addclass:config.button.clase,insertHtml:config.button.label})
        const bannerFixedSeguro = createElement({attrib:config.bannerFix.id,addclass:config.bannerFix.clase,append:buttonFixed})
        const dataScroll = getDataScroll(config.targetSelector)
        const dataTop = getDataScroll(config.targetTop)
        bannerFixedSeguro.style.display = 'none'
        document.querySelector('body').appendChild(bannerFixedSeguro)

        buttonFixed.addEventListener('click',()=>{
            window.scrollTo({top: dataTop,behavior: 'smooth'})
            bannerFixedSeguro.style.display = 'none'
        })

        window.addEventListener("scroll",(event)=>{
            console.log(window.scrollY, dataScroll)
            if(window.scrollY > dataScroll ){
                if(bannerFixedSeguro.getAttribute('style')){
                    bannerFixedSeguro.removeAttribute('style')
                }
            } else {
                if(!bannerFixedSeguro.getAttribute('style')){
                    bannerFixedSeguro.style.display = 'none'
                }
            }
        })
    }
    //ENVIO DE SOLICITUD
    function frmSVDCaptchaCallback(strTokenCaptcha) {
        //const url_sendmail ="https://preprodportal.viabcp.com/apis/form/send/message;";
        const url_sendmail = "https://www.viabcp.com/apis/form/send/message;";
        let inputDNI= frmSVDComunicacion.querySelector('#input_dni');
        let inputTLF = frmSVDComunicacion.querySelector('#input_celular');
        //let chkDeclaracion = frmSVDComunicacion.querySelector('#input_declaracion');
        let dniHash = fnsha256(inputDNI.value.trim());
        let indexCaptcha = frmInitSVDPlanesCaptcha.getAttribute('index');
        let boolDNI = frmInitSVDPlanes.Validar.CampoNumerico(inputDNI);
        let boolTLF = frmInitSVDPlanes.Validar.CampoNumerico(inputTLF);
        let nroDocumento = inputDNI.value.trim();
        let telefono = inputTLF.value.trim();
        //let boolAceptaDeclaracion = true;
        /*if(chkDeclaracion){
            boolAceptaDeclaracion = false;
            boolAceptaDeclaracion = chkDeclaracion.getAttribute('style') ? true : frmInitSVDPlanes.Validar.CampoCheckButton(chkDeclaracion);
        }*/
        if (!boolDNI || !boolTLF ) { grecaptcha.reset(indexCaptcha) ;return; };
    
        const jsonRequest = {
            leadId: getLeadID(),
            producto: "MODAL ONE CLICK - HOME",
            tipoFormulario: "MODALONECLICK",
            tipoProducto: "MODAL ONE CLICK - HOME",
            captchaToken: strTokenCaptcha,
            data: {
                tdocumento: "DNI",
                ndocumento: nroDocumento,
                fechaNEO: "-",
                ndocumentohash: dniHash,
                aceptopromocion: "si",
                productopromocion:  'Seguro Salud SOS' ,
                abreviaturaproducto: "SSOS" ,
                descripcionpromocion:'-' ,
                email: "sinemail@sinmail.com",
                flujoventa: "VIABCP",
                promocioncancelada: telefono,
                canal: 'VIABCP',
                tipoplan: '-' 
            }
            ,
            metadata: {
                origen: document.location.href,
                agente: navigator.userAgent,
            },
        }
    
        const requestOptions = {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "g-recaptcha-response": strTokenCaptcha,
            },
            body: JSON.stringify(jsonRequest),
            redirect: "follow",
        }
    
        fetch(url_sendmail, requestOptions)
        .then((response) => {
            if (response.status == 200) {
                console.log('**Solicitud Registrada**')
                pantalla1.style.display="none"
                pantalla2.style.display="flex"
                if(innerWidth < 657){document.querySelector('.bcp_beneficio_presentacion_producto').style.marginTop = '250px'};
                //document.querySelector('.bcp_breadcrum').classList.add('confirm');
                taggeoSVDModal({label:'',name:jsonRequest.tipoProducto,type:"trackFormSubmit"})
                console.log(telefono.length)
                if(telefono.length == 0){
                    digitalData.push({
                        "error":{
                            "code":"VA001",
                            "message":"Campo telefono vacio"
                        },
                        "event":"trackError"
                    });
                }
                dataLayer.push({
                    "event": "virtualEvent",
                    "category": "Formulario",
                    "action": "CTC - SOS SALUD",
                    "label": "SOS-SALUD"
                })
                fbq('track', 'CompleteRegistration');
            } else {
            console.warn("No se registro", response.status);
            }
            grecaptcha.reset(indexCaptcha);
        })
        .catch((error) => {
            console.error("error", error);
            grecaptcha.reset(indexCaptcha);
            taggeoSVDModal({label:'Falla API',name:'Error - Falla API'});
        });
    }
    
    function taggeoSVDModal(data){
        const {label,name='click',type='trackAction',dataTaggeo = dataTaggeoSOS} = data
        if(type =='trackAction'){
            digitalData.push({
                "action":{
                    "group":dataTaggeo.group,
                    "category":dataTaggeo.category,
                    "name":name,
                    "label":label //+ dataTaggeoExp.testLabel
                },
                "metadata":{
                    "key":"Producto",
                    "value":dataTaggeo.producto
                },
                "event":"trackAction"
            })
        } else {
            digitalData.push({
                "form":{
                    "channel":dataTaggeo.channel,
                    "version":dataTaggeo.version,
                    "name":name,
                    "product":dataTaggeo.producto
                },
                "event":type
            })
        }
    }
       
    function ocultarChatFlotante(){
        const chatFlotante = document.querySelector('.bcp_footer_ayuda_flotante');
        if(chatFlotante){chatFlotante.style.display = 'none'};
        console.log('ocultar chat');
    }
    document.addEventListener('DOMContentLoaded',()=> {
        
        const containerBanner = document.querySelector("main.bcp_banner-sin-carousel.producto > div > div > div > div > div")
        if(containerBanner){
            containerBanner.appendChild(formularioSVD)
            frmSVDComunicacion = document.querySelector('#frmSVDComunicacion'); //frmMocSegurosHome
            frmInitSVDPlanes = new Formulario(frmSVDComunicacion);//formContentMOCSegurosHome
            frmInitSVDPlanesCaptcha;
            generarInputs()
            actionLink()
            ocultarChatFlotante()
            actionScrollTop()

            document.querySelector('.bcp_beneficio_presentacion_producto_titulo p span:nth-child(1)').classList.add('custom-font24')
            document.querySelector('.bcp_beneficio_presentacion_producto_titulo p span:nth-child(3)').classList.add('custom-font20')
            formularioSVD.removeAttribute('style')
            //taggeoSVDModal({label:'',name:'Landing-Pnd',type:'trackFormView'});
            activarFixedBanner({
                targetSelector: '.input_llamar',
                targetTop:'.modal_svd_comunicacion'
            })
        }
    });

    function waitForElm(selector) {
        return new Promise(resolve => {
            if (document.querySelector(selector)) {
                return resolve(document.querySelector(selector));
            }

            const observer = new MutationObserver(mutations => {
                if (document.querySelector(selector)) {
                    observer.disconnect();
                    resolve(document.querySelector(selector));
                }
            });

            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    }
</script>